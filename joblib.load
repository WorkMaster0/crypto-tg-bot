import os, joblib

def train_or_load_model(model_path, df):
    if os.path.exists(model_path) and os.path.getsize(model_path) > 0:
        try:
            model = joblib.load(model_path)
            return model
        except Exception as e:
            print(f"⚠️ Loading model failed, retraining: {e}")
    # якщо нема або зламаний → тренуємо заново
    model, acc = train_ml_model(df)
    if model:
        joblib.dump(model, model_path)
    return model